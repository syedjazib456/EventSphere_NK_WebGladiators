@model IEnumerable<EventSphere.Models.Event>

@{
    var registeredEvents = ViewBag.RegisteredEvents as List<int> ?? new List<int>();
}

<!-- Page Header -->
<div class="text-center mb-5" style="padding: 40px 20px;">
    <h1 style="font-size: 3rem; font-weight: 700; color:#333; margin-bottom: 15px;">Explore Events 🎉</h1>
    <p style="font-size: 1.25rem; color: #555; max-width: 700px; margin:0 auto;">
        Discover, register, and participate in upcoming college events. Stay updated and never miss out!
    </p>
</div>

<!-- Featured Events Section -->
<div class="row g-4">
    @foreach (var ev in Model)
    {
        <div class="col-md-4">
            <div class="card h-100 border-0 shadow-lg" style="border-radius:15px; overflow:hidden; transition: transform 0.3s, box-shadow 0.3s;">

                <!-- Gradient Header -->
                <div style="background: linear-gradient(135deg, #6C63FF, #FF6584); color:white; padding:20px 15px;">
                    <h5 style="font-weight:700; font-size:1.5rem;">@ev.Title</h5>
                    <p style="font-size:0.9rem; margin:0;">@ev.Category</p>
                </div>

                <!-- Body -->
                <div class="card-body d-flex flex-column">
                    <p class="text-muted mb-2" style="flex-grow:1;">@ev.Description</p>
                    <p class="mb-1"><strong>Date:</strong> @ev.Date.ToString("yyyy-MM-dd")</p>
                    <p class="mb-3"><strong>Venue:</strong> @ev.Venue</p>

                    <!-- Register/Login Button -->
                    <div class="mt-auto">
                        @if (!User.Identity.IsAuthenticated)
                        {
                            <a href="@Url.Action("Login", "Account")" class="btn btn-gradient w-100 fw-bold">
                                Login to Register
                            </a>
                        }
                        else if (registeredEvents.Contains(ev.EventId))
                        {
                            <span class="badge bg-success w-100 py-2 fw-bold" style="font-size:0.95rem; border-radius:50px;">Registered</span>
                        }
                        else
                        {
                            <form asp-action="Register" method="post">
                                <input type="hidden" name="EventId" value="@ev.EventId" />
                                <button type="submit" class="btn btn-gradient w-100 fw-bold">
                                    Register
                                </button>
                            </form>
                        }
                    </div>
                </div>
            </div>
        </div>
    }
</div>

